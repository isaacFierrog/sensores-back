import{_ as A,d as k,l as D,t as P,g as u,m,n as R,r as b,o as n,c as l,f as e,q as c,F as w,h as C,k as g,b as G,a as x,s as B,p as E,e as N}from"./index.a96a3f0d.js";import{m as F}from"./modulosService.2b499ff0.js";const z={components:{Grafica:k(()=>x(()=>import("./Grafica.3eea1db4.js"),["static/Grafica.3eea1db4.js","static/index.a96a3f0d.js","static/index.64017e9b.css"]))},setup(){const t=D(),{params:p}=P(t),r=u(null),o=u(null),f=2e4,i=u(null),d=()=>{clearInterval(o.value),o.value=null},a=async()=>{try{const _=await(await F.retrieve(p.value.id)).data;r.value=_,i.value=_.sensores.map(h=>({name:h.clave,data:h.datos.map(V=>V.valor).reverse()})),console.log(_),console.log("DATOS PARA GRAFICAR"),console.log(i.value)}catch(s){console.log(s)}},y=m(()=>r.value.sensores||0),I=m(()=>s=>s.length?s[0].estado?"sensor--activo":"sensor--inactivo":"sensor--sinestado"),S=m(()=>s=>s.length?s[0].valor:"N/E");return a(),o.value=setInterval(()=>{a()},f),R(()=>d()),{modulo:r,referenciaPeticion:o,sensores:y,estadoSensor:I,ultimoValor:S,datos:i}}},v=t=>(E("data-v-1d7ad21b"),t=t(),N(),t),L={key:0,class:"modulo"},M={class:"info"},O={class:"info__titulo"},T={class:"info__zona"},U={class:"info__mina"},q=v(()=>e("hr",null,null,-1)),Z={key:0,class:"sensores"},j={class:"sensor__clave"},H=v(()=>e("hr",null,null,-1)),J={class:"grafica"},K=v(()=>e("h2",null,"Grafica de datos",-1));function Q(t,p,r,o,f,i){const d=b("Grafica");return n(),l("div",null,[o.modulo?(n(),l("article",L,[e("section",M,[e("h1",O,c(o.modulo.mac),1),e("section",null,[e("p",T,"Zona: "+c(o.modulo.area),1),e("p",U,"Mina: "+c(o.modulo.mina),1)])]),q,o.sensores?(n(),l("section",Z,[(n(!0),l(w,null,C(o.sensores,a=>(n(),l("article",{class:B(["sensor",o.estadoSensor(a.datos)]),key:a},[e("p",j,c(a.clave),1),H,e("p",null,"Ultimo valor: "+c(o.ultimoValor(a.datos)),1)],2))),128))])):g("",!0)])):g("",!0),e("section",J,[K,G(d,{datos:o.datos},null,8,["datos"])])])}const Y=A(z,[["render",Q],["__scopeId","data-v-1d7ad21b"]]);export{Y as default};
