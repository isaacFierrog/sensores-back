import{j as Y,k as o,l as m,m as P,g as E,s as Z,n as aa,o as V,c as O,h as s,w as l,u as e,f as ea,b as i,p as I,F as sa,d as oa,e as ra,i as w}from"./index-c6405e8c.js";import{i as h,N as la,a as L}from"./service-eaac5c30.js";import{N as B,a as A}from"./Grid-a545350e.js";const N="usuarios/",K={list(a){return h.get(N,{params:a})},retrieve(a,u){return h.get(`${N}${a}/`,{params:u})},create(a){return h.post(N,a)},update(a,u){return h.patch(`${N}${a}/`,u)}},ta=Y("usuarios",()=>{const a=o({correo:null,nombre:null,apellido:null,mina:null,area:null,password:null,rol:null}),u=o(null),b=o(!1),g=o(!1),y=o(!1),D=o(!1),_=o(!1),p=o(null),n=o(!1),c=o(!1),U=()=>y.value=!0,S=()=>g.value=!0,x=()=>b.value=!0,f=()=>c.value=!0,C=()=>c.value=!1,M=()=>n.value=!0,d=()=>n.value=!1,v=()=>D.value=!0,t=({apellido:r,area:T,rol:H,correo:J,mina:Q,nombre:W,id:X})=>{a.value.correo=J,a.value.nombre=W,a.value.apellido=r,a.value.mina=Q,a.value.area=T,a.value.rol=H,u.value=X},R=()=>{for(const r in a.value)a.value[r]=null;u.value=null,b.value=!1,y.value=!1,g.value=!1,D.value=!1,_.value=!1},$=async r=>{const T=(await K.retrieve(r)).data;t(T)},k=m(()=>!a.value.password&&!p.value?!1:a.value.password===p.value),z=m(()=>{for(const r in a.value)if(a.value[r]===null)return!1;return!0}),F=m(()=>{const r=`${a.value.nombre} ${a.value.apellido}`.toUpperCase();return r.length>=17?`${r.slice(0,17)} . . .`:r}),j=m(()=>b.value),G=m(()=>y.value),q=m(()=>g.value);return P(n,r=>{r||R()}),{usuario:a,usuarioId:u,usuarioActualizar:D,verificacionPassword:p,modalUsuario:n,modalConfirmarEliminar:c,passwordEditar:_,mostrarModalUsuario:M,ocultarModalUsuario:d,obtenerUsuario:$,mostrarDatosUsuario:U,mostrarModalConfirmar:f,ocultarModalConfirmar:C,editarDatosUsuario:S,crearDatosUsuario:x,actualizarUsuarios:v,passwordCorrecto:k,camposLlenos:z,mostrarDatos:G,editarDatos:q,crearDatos:j,usuarioNombre:F}}),ua=i("i",{class:"fa-solid fa-user"},null,-1),na=i("span",{class:"uppercase font-bold"}," + crear usuario ",-1),ia=i("p",{class:"uppercase text-slate-200 font-bold"},"nombre usuario",-1),ca=i("p",{class:"uppercase text-slate-200 font-bold"},"mina",-1),da=i("p",{class:"uppercase text-slate-200 font-bold"},"area",-1),va={__name:"UsuariosView",setup(a){const u=E(()=>w(()=>import("./ConfirmarEliminarComponent-0e398206.js"),["static/ConfirmarEliminarComponent-0e398206.js","static/service-eaac5c30.js","static/index-c6405e8c.js","static/index-3e64aa19.css","static/Modal-8fb17448.js","static/fade-in-scale-up.cssr-445e53b0.js","static/index-fb0670a3.js","static/Grid-a545350e.js"])),b=E(()=>w(()=>import("./FormularioComponent-1b3d156b.js"),["static/FormularioComponent-1b3d156b.js","static/Select-7a7579ea.js","static/index-c6405e8c.js","static/index-3e64aa19.css","static/fade-in-scale-up.cssr-445e53b0.js","static/service-eaac5c30.js","static/FocusDetector-bb1158c5.js","static/Grid-a545350e.js","static/index-fb0670a3.js","static/use-notification-44d471df.js","static/Modal-8fb17448.js"])),g=E(()=>w(()=>import("./SubtituloComponent-5847751a.js"),["static/SubtituloComponent-5847751a.js","static/index-c6405e8c.js","static/index-3e64aa19.css"])),y=E(()=>w(()=>import("./UsuarioComponent-e3da12f7.js"),["static/UsuarioComponent-e3da12f7.js","static/service-eaac5c30.js","static/index-c6405e8c.js","static/index-3e64aa19.css","static/Grid-a545350e.js"])),D=E(()=>w(()=>import("./TemplateListadoComponent-bbfc8626.js"),["static/TemplateListadoComponent-bbfc8626.js","static/_plugin-vue_export-helper-c27b6911.js","static/index-c6405e8c.js","static/index-3e64aa19.css"])),_=ta(),p=o([]),n=o(null),c=o(null),U=o(null),S=()=>{n.value=null,c.value=null,U.value=null},x=()=>{_.crearDatosUsuario(),_.mostrarModalUsuario()},f=async()=>{try{const d=(await K.list({mina:c.value,area:U.value,nombre:n.value})).data;p.value=d.results,S(),console.log("LISTADO DE USUARIOS"),console.log(p.value)}catch(d){console.log(d)}},C=m(()=>["text-slate-200"]),{usuarioActualizar:M}=Z(_);return aa(()=>{f()}),P(M,d=>{d&&f()}),(d,v)=>(V(),O("div",null,[s(e(D),null,{cabecera:l(()=>[s(e(g),{"estilos-sub":e(C)},{subtitulo:l(()=>[ea(" Usuarios ")]),imagen:l(()=>[ua]),_:1},8,["estilos-sub"]),s(e(la),{type:"info",ghost:!1,onClick:x},{default:l(()=>[na]),_:1})]),filtros:l(()=>[s(e(B),{"x-gap":12,"y-gap":12,cols:3},{default:l(()=>[s(e(A),null,{default:l(()=>[i("article",null,[ia,s(e(L),{onKeypress:I(f,["enter"]),placeholder:"Buscar por nombre de usuario",value:n.value,"onUpdate:value":v[0]||(v[0]=t=>n.value=t)},null,8,["onKeypress","value"])])]),_:1}),s(e(A),null,{default:l(()=>[i("article",null,[ca,s(e(L),{onKeypress:I(f,["enter"]),placeholder:"Buscar modulos por mina",value:c.value,"onUpdate:value":v[1]||(v[1]=t=>c.value=t)},null,8,["onKeypress","value"])])]),_:1}),s(e(A),null,{default:l(()=>[i("article",null,[da,s(e(L),{onKeypress:I(f,["enter"]),placeholder:"Buscar modulos por area",value:U.value,"onUpdate:value":v[2]||(v[2]=t=>U.value=t)},null,8,["onKeypress","value"])])]),_:1})]),_:1})]),listado:l(()=>[i("section",null,[s(e(B),{"x-gap":12,"y-gap":12,cols:4},{default:l(()=>[(V(!0),O(sa,null,oa(p.value,t=>(V(),ra(e(A),{key:t},{default:l(()=>[s(e(y),{usuario:t},null,8,["usuario"])]),_:2},1024))),128))]),_:1})])]),_:1}),s(e(b)),s(e(u))]))}},_a=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"}));export{_a as U,K as a,ta as u};
