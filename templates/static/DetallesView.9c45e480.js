import{m as _}from"./modulosServicio.139cf29e.js";import{_ as h,o as r,c as n,f as t,t as l,F as p,h as f,g as d,n as v,p as g,e as y}from"./index.4c77faae.js";const D={created(){this.obtenerDatosModulo(),this.referenciaPeticion=setInterval(()=>{this.obtenerDatosModulo()},this.tiempoPeticion)},beforeUnmount(){this.detenerPeticion()},data(){return{modulo:null,referenciaPeticion:null,tiempoPeticion:5e3}},methods:{detenerPeticion(){clearInterval(this.referenciaPeticion),this.referenciaPeticion=null},async obtenerDatosModulo(){try{const{id:e}=this.$route.params,s=await _.retrieve(e),a=await s.data,{status:i,statusText:o}=s;if(i<200||i>299)throw{status:i,statusText:o};console.log("DATA"),console.log(a),this.modulo=a}catch({status:e,statusText:s}){console.log({mensaje:s||"Ocurrio un error",status:e})}}},computed:{moduloCargado(){return this.modulo!=null},sensoresCargados(){return this.modulo.sensores.length>0},sensores(){return this.modulo.sensores},ultimoValor(){return e=>e.length===0?"N/E":e[0].valor},estadoSensor(){return e=>e.length===0?"sensor--sinestado":e[0].estado?"sensor--activo":"sensor--inactivo"}}},m=e=>(g("data-v-7def77f8"),e=e(),y(),e),P=m(()=>t("h1",null,"Detalles del modulo",-1)),S={key:0},w={key:0,class:"sensores"},x={class:"sensor__clave"},I=m(()=>t("hr",null,null,-1));function V(e,s,a,i,o,u){return r(),n("div",null,[P,o.modulo?(r(),n("article",S,[t("h3",null,"Modulo: "+l(o.modulo.mac),1),t("p",null,"Zona: "+l(o.modulo.area),1),t("p",null,"Mina: "+l(o.modulo.mina),1),u.sensoresCargados?(r(),n("section",w,[(r(!0),n(p,null,f(o.modulo.sensores,c=>(r(),n("article",{class:v(["sensor",u.estadoSensor(c.datos)]),key:c},[t("p",x,l(c.clave),1),I,t("p",null,"Ultimo valor: "+l(u.ultimoValor(c.datos)),1)],2))),128))])):d("",!0)])):d("",!0)])}const M=h(D,[["render",V],["__scopeId","data-v-7def77f8"]]);export{M as default};
