import{m as x}from"./modulosServicio.d4978c22.js";import{_ as S,o as n,c as l,f as o,l as m,v as c,F as _,h,t as d,g as f,q as b,n as v,p as y,e as M}from"./index.b95d0abd.js";const j={props:{mostrarForm:{type:Boolean}},data(){return{mac:"",mina:"",area:"",sensores:[],ocultar:!0,numSensores:0,maxSensores:8,minas:["HERMOSILLO","CANANEA"],areas:["A","B","C","D"],mensajeExito:!1,mensajeError:!1}},methods:{agregarSensores(){if(this.numSensores>=this.maxSensores)return;const a={clave:`${this.mac}-${++this.numSensores}`};this.sensores.push(a)},eliminarSensores(){this.numSensores--,this.sensores.pop()},mostrarMensajeExito(){this.mensajeExito=!0},async crearModulo(){try{const a={mac:this.mac,mina:this.mina,area:this.area,sensores:this.sensores||[]},e=await x.create(a),p=await e.data,{status:u,statusText:r}=e;if(u<200||u>299)throw{status:u,statusText:r};this.reiniciarCampos(),this.refrescarModulos(),this.mostrarMensajeExito()}catch({status:a,statusText:e}){console.log(`Error ${a}: ${e||"Ocurrio un error"}`)}},ocultarFormulario(){this.$emit("ocultarFormulario")},refrescarModulos(){this.$emit("refrescarModulos")},reiniciarCampos(){this.mac="",this.mina="",this.area="",this.numSensores=0}},computed:{ocultarForm(){return{"ocultar-layout":this.mostrarForm}}}},i=a=>(y("data-v-1da1362d"),a=a(),M(),a),F=i(()=>o("h2",{class:"txt-upper blanco-a titulo-modulo"},"Crear modulo",-1)),g=i(()=>o("p",{class:"blanco-a form__label"},"Mac",-1)),E=i(()=>o("p",{class:"blanco-a form__label"},"Mina",-1)),C={class:"form__input",id:"minas"},k=["value"],w=i(()=>o("p",{class:"blanco-a form__label"},"Area",-1)),A={class:"form__input",id:"areas"},B=["value"],I={class:"sensores"},V=i(()=>o("input",{type:"submit",class:"boton-crear boton-modulo blanco-a txt-upper",value:"Guardar"},null,-1)),D={key:0,class:"mensaje mensaje--error mensaje--ocultar"},N={key:1,class:"mensaje mensaje--exito mensaje--ocultar"};function L(a,e,p,u,r,t){return n(),l("div",{class:v(["layout-modulo-form",t.ocultarForm])},[o("button",{class:"txt-upper blanco-a titulo-modulo boton-cerrar",onClick:e[0]||(e[0]=(...s)=>t.ocultarFormulario&&t.ocultarFormulario(...s))},"x"),F,o("form",{class:"form",onSubmit:e[6]||(e[6]=b((...s)=>t.crearModulo&&t.crearModulo(...s),["prevent"]))},[g,m(o("input",{type:"text",class:"form__input","onUpdate:modelValue":e[1]||(e[1]=s=>r.mac=s)},null,512),[[c,r.mac]]),E,m(o("input",{type:"text",list:"minas",class:"form__input","onUpdate:modelValue":e[2]||(e[2]=s=>r.mina=s)},null,512),[[c,r.mina]]),o("datalist",C,[(n(!0),l(_,null,h(r.minas,s=>(n(),l("option",{key:s,value:s},d(s),9,k))),128))]),w,m(o("input",{type:"text",list:"areas",class:"form__input","onUpdate:modelValue":e[3]||(e[3]=s=>r.area=s)},null,512),[[c,r.area]]),o("datalist",A,[(n(!0),l(_,null,h(r.areas,s=>(n(),l("option",{key:s,value:s},d(s),9,B))),128))]),o("section",I,[o("div",{class:"sensores__boton blanco-a",onClick:e[4]||(e[4]=(...s)=>t.eliminarSensores&&t.eliminarSensores(...s))},"-"),o("p",null,"Sensores: "+d(r.numSensores),1),o("div",{class:"sensores__boton blanco-a",onClick:e[5]||(e[5]=(...s)=>t.agregarSensores&&t.agregarSensores(...s))},"+")]),V,r.mensajeError?(n(),l("p",D,"Debes de llenar todos los campos")):f("",!0),r.mensajeExito?(n(),l("p",N,"Modulo creado exitosamente")):f("",!0)],32)],2)}const U=S(j,[["render",L],["__scopeId","data-v-1da1362d"]]);export{U as default};
