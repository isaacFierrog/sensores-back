import{m as h}from"./modulosServicio.0d334e76.js";import{_ as S,o as n,c as l,f as e,k as m,v as b,m as p,F as _,g as f,t as c,l as v,n as x,p as M,e as y}from"./index.6e79b8f1.js";import"./servicio.844cd778.js";import"./_commonjsHelpers.44717140.js";const F={props:{mostrarForm:{type:Boolean}},data(){return{mac:"",mina:"",area:"",sensores:[],ocultar:!0,numSensores:0,maxSensores:8,minas:["HERMOSILLO","CANANEA"],areas:["A","B","C","D"]}},methods:{agregarSensores(){if(this.numSensores>=this.maxSensores)return;const a={clave:`${this.mac}-${++this.numSensores}`};this.sensores.push(a)},eliminarSensores(){this.numSensores--,this.sensores.pop()},async crearModulo(){try{const a={mac:this.mac,mina:this.mina,area:this.area,sensores:this.sensores||[]},o=await h.create(a),d=await o.data,{status:u,statusText:r}=o;if(u<200||u>299)throw{status:u,statusText:r};this.reiniciarCampos(),this.refrescarModulos()}catch({status:a,statusText:o}){console.log(`Error ${a}: ${o||"Ocurrio un error"}`)}},ocultarFormulario(){this.$emit("ocultarFormulario")},refrescarModulos(){this.$emit("refrescarModulos")},reiniciarCampos(){this.mac="",this.mina="",this.area="",this.numSensores=0}},computed:{ocultarForm(){return{"ocultar-layout":this.mostrarForm}}}},i=a=>(M("data-v-a05fa542"),a=a(),y(),a),g=i(()=>e("h2",{class:"txt-upper blanco-a titulo-modulo"},"Crear modulo",-1)),C=i(()=>e("p",{class:"blanco-a form__label"},"Mac",-1)),k=i(()=>e("p",{class:"blanco-a form__label"},"Mina",-1)),w=["value"],A=i(()=>e("p",{class:"blanco-a form__label"},"Area",-1)),B=["value"],I={class:"sensores"},E=i(()=>e("input",{type:"submit",class:"boton-crear boton-modulo blanco-a txt-upper",value:"Guardar"},null,-1));function V(a,o,d,u,r,t){return n(),l("div",{class:x(["layout-modulo-form",t.ocultarForm])},[e("button",{class:"txt-upper blanco-a titulo-modulo boton-cerrar",onClick:o[0]||(o[0]=(...s)=>t.ocultarFormulario&&t.ocultarFormulario(...s))},"x"),g,e("form",{class:"form",onSubmit:o[6]||(o[6]=v((...s)=>t.crearModulo&&t.crearModulo(...s),["prevent"]))},[C,m(e("input",{type:"text",class:"form__input","onUpdate:modelValue":o[1]||(o[1]=s=>r.mac=s)},null,512),[[b,r.mac]]),k,m(e("select",{class:"form__input","onUpdate:modelValue":o[2]||(o[2]=s=>r.mina=s)},[(n(!0),l(_,null,f(r.minas,s=>(n(),l("option",{key:s,value:s},c(s),9,w))),128))],512),[[p,r.mina]]),A,m(e("select",{class:"form__input","onUpdate:modelValue":o[3]||(o[3]=s=>r.area=s)},[(n(!0),l(_,null,f(r.areas,s=>(n(),l("option",{key:s,value:s},c(s),9,B))),128))],512),[[p,r.area]]),e("section",I,[e("div",{class:"sensores__boton blanco-a",onClick:o[4]||(o[4]=(...s)=>t.eliminarSensores&&t.eliminarSensores(...s))},"-"),e("p",null,"Sensores: "+c(r.numSensores),1),e("div",{class:"sensores__boton blanco-a",onClick:o[5]||(o[5]=(...s)=>t.agregarSensores&&t.agregarSensores(...s))},"+")]),E],32)],2)}const T=S(F,[["render",V],["__scopeId","data-v-a05fa542"]]);export{T as default};
